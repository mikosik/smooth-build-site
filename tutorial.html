<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Smooth-build : powerful build tool with simple language" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Smooth-build</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="download_banner" href="download.html">download</a>
          <a id="sourcecode_banner" href="https://github.com/mikosik/smooth-build">source code</a>
          <a id="donate_banner" href="donate.html">donate</a>

          <h1 id="project_title"><a class="white_link" href="index.html">Smooth-build</a></h1>
          <h2 id="project_tagline">powerful build tool with simple language</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>Smooth tutorial</h3>
        <h4>What is Smooth-build</h4>
        <p>
           Smooth-build is a build automation tool (and its simple yet expressive language).
        </p>
        <p>
           Building and packaging java application can be done in one line of Smooth code:
        </p>
        <p>
<pre><code>
releaseJar: <a href="api/smooth/file/files.html">files</a>("src/") | <a href="api/smooth/java/javac.html">javac</a> | <a href="api/smooth/java/jar.html">jar</a> | <a href="api/smooth/file/save.html">save</a>("release/");

</code></pre>
        </p>
           Once Smooth development reaches version 1.0 (currently it's just 0.1) it will allow robust multithreading execution (possibly on multiple machines) of your build process without any extra configuration on your side.
        </p>

        <h4>Prerequisites</h4>
        <p>Learning is much faster when you can experiment on the way. Therefore it is advised to install Smooth-build by following <a class="visible_link" href="install.html">download / install</a> documentation so you can try all examples from this tutorial yourself.</p>

        </p>All examples used in this tutorial are available online as <a class="visible_link" href="https://github.com/mikosik/smooth-build-examples">smooth-build-examples</a> github project. You can checkout it as a git repository:
        <p>
<pre><code>
git clone https://github.com/mikosik/smooth-build-examples.git

</code></pre>
        </p>
        <p>or download <a class="visible_link" href="https://github.com/mikosik/smooth-build-examples/archive/master.zip">master.zip</a> file if you do not have git installed.</p>
        
        <h4>Running build</h4>  
        <p>Smooth uses "build.smooth" file located in your project's root directory as a description of project's build process. If you downloaded smooth-build-examples, note that it contains many exampleXX directories. Each is a separate project so each contains single "build.smooth" file.
        </p>
        <p>
        To run build process enter directory "example01" and type "smooth releaseJar" (on Linux) or "smooth.bat releaseJar" (on Windows). If you installed smooth correctly and added it to your system PATH as advised by <a class="visible_link" href="install.html"> download / install</a> you should get smooth running successfully.
        </p>
        <p>
<pre><code>$smooth releaseJar
[files] DONE
[javac] DONE
[jar]   DONE
[save]  DONE
SUCCESS
$
</code></pre>
        </p>

        <h4>Function calls</h4>
        </p>
Now let's take a look at build file we've just run from our first example (<a class="visible_link" href="https://github.com/mikosik/smooth-build-examples/tree/master/example01">example01</a>). Note you can click function names in each example to see detailed API documentation.
        </p>
        <p>
<pre><code>
releaseJar: <a href="api/smooth/file/files.html">files</a>("src/") | <a href="api/smooth/java/javac.html">javac</a> | <a href="api/smooth/java/jar.html">jar</a> | <a href="api/smooth/file/save.html">save</a>("release/");

</code></pre>
        </p>
        <p>
        If you happen to know how pipes work in Linux shells it will be clear to you what this script does. It defines "releaseJar" function that performs following tasks:
        <ul>
          <li>takes all files (recursively) from "src" directory</li>
          <li>passes them to <a href="api/smooth/java/javac.html">javac</a> function (Java compiler) that compiles them</li>
          <li>passes result of <a href="api/smooth/java/javac.html">javac</a> call (*.class files) to <a href="api/smooth/java/jar.html">jar</a> function that packs them into single jar file</li>
          <li>stores resulting jar file inside "release/" directory</li>
        </ul>
        </p>
        <p>Note that you don't need to explicitly create directory for *.class files nor even mention it in build file. Smooth handles that automatically.</p>

        <h4>Type system</h4>
        <p>
	We've seen that function can accept and return values which we called 'files' so far. It is time to define all types that can be accepted and returned by Smooth function. As of latest release there are two basic types and two compound types:
        <dl>
          <dt>String</dt>
          <dd>Sequence of characters.</dd>
          <dt>String*</dt>
          <dd>Collection of Strings.</dd>
          <dt>File</dt>
          <dd>Single file read from file system. Each File has a content and path associated with it.</dd>
          <dt>File*</dt>
          <dd>Collection of Files. It will never contain two files which have the same path.</dd>
        </dl>
        There are obviously some important types (like boolean) missing. Remember this is very early version of Smooth-build tool.
        </p>
        <p>
        Smooth is statically typed. Each function declares its parameters and their types. Build process will fail in initial stage if argument passed to a function call won't match required types.
        </p>
        
        <h4>Nested function calls</h4>
        <p>Let's dig a little bit deeper into functions chaining. Chaining function calls via pipes that we've seen in the very first example is just a syntactic sugar over more traditional function calls. Let's take a look at <a class="visible_link" href="https://github.com/mikosik/smooth-build-examples/tree/master/example02">example02</a> that declares the same process but without using pipes.
        <p>
<pre><code>
releaseJar: <a href="api/smooth/file/save.html">save</a>("release/", <a href="api/smooth/java/jar.html">jar</a>(<a href="api/smooth/java/javac.html">javac</a>(<a href="api/smooth/file/files.html">files</a>("src/"))));

</code></pre>
        </p>
        <p>
        Now it looks like friendly if you come from world of imperative languages.
        </p>
        <p>As you could probably noticed version using pipes is much more readable. The flow of data through different functions is much more visible. You should always strive to use pipes version.</p>

        <h4>Named parameters</h4>
        <p>
          If you take a look at our last example and check documentation for <a href="api/smooth/file/save.html">save</a> function you notice that we passed only two arguments to it while documentation for that function specifies three. Smooth does not require you to specify values for all parameters nor it requires to pass them in any order. Smooth intelligently deduces which parameter should be assigned from which argument based on their types. If there is ambiguity (for example two parameters have the same type as passed argument) matching will fail unless we explicitly assign ambiguous arguments to parameters.
        </p>
        <p>
        Let's look at <a class="visible_link" href="https://github.com/mikosik/smooth-build-examples/tree/master/example03">example03</a>. It explicitly assigns arguments to parameters (although it is not necessary in that case as automatic assignment would work fine).
        </p>
        <p>
<pre><code>
releaseJar: <a href="api/smooth/file/save.html">save</a>(dir="release/", file=<a href="api/smooth/java/jar.html">jar</a>(<a href="api/smooth/java/javac.html">javac</a>(<a href="api/smooth/file/files.html">files</a>("src/"))));

</code></pre>
        </p>
        <p>
          Note that explicitly assigning argument to parameter cannot be done for value that is passed through a pipe. This may be a nuisanance as you have to use nested function calls in such cases.
        </p>
	<h4>Literals</h4>
        As you noticed Smooth contains String literals as any other language. Another literal that you find useful is a collection literal that lets you create File* and String* collections. Collection literal is comma separated list of expressions enclosed inside brackets []. <a class="visible_link" href="https://github.com/mikosik/smooth-build-examples/tree/master/example04">Example04</a> below shows collection literal in action. Note that this time our (user defined) function "zipped" calls other function defined by us "books".
        <p>
<pre><code>
books: [ <a href="api/smooth/file/file.html">file</a>("books/LifeOfBrian.txt"), <a href="api/smooth/file/file.html">file</a>("books/TheMeaningOfLife.txt") ];
zipped: books | <a href="api/smooth/compress/zip.html">zip</a> | <a href="api/smooth/file.save.html">save("output")</a>;

</code></pre>
        </p>
        <h4>More to come</h4>
        <p>
        This is only beginning of Smooth-build development so there's a lot of features that can be done to revolutionize the world of application building. Take a look at <a class="visible_link" href="roadmap.html">Feature roadmap</a> to see what is coming.
        </p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p><a class="white_link" href="https://groups.google.com/forum/#!forum/smooth-build">discussion group</a> | <a class="white_link" href="https://github.com/mikosik/smooth-build/issues/new">report issue</a></p>
      </footer>
    </div>

  </body>
</html>
